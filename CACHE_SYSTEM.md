# 订单数据缓存系统

## 功能说明

这个缓存系统允许你：
1. **快速访问订单数据** - 无需每次调用Shopify API
2. **减少API调用限制** - 缓存有效期内不会重复请求
3. **提升用户体验** - 页面加载更快

## 工作原理

1. **首次访问**: 从Shopify获取数据并缓存到本地文件
2. **后续访问**: 优先从缓存读取数据（5分钟内有效）
3. **缓存过期**: 自动从Shopify重新获取数据
4. **手动更新**: 可点击"更新缓存"按钮强制刷新

## 文件结构

```
app/
├── services/
│   └── cache.server.js          # 缓存服务核心逻辑
├── routes/
│   ├── app.orders.jsx           # 订单页面（已集成缓存）
│   └── api.cache-update.jsx     # 缓存更新API接口
└── cache/
    └── orders.json              # 缓存数据文件（自动生成）
```

## 使用方法

### 自动缓存
- 访问 `/app/orders` 页面会自动使用缓存
- 缓存有效期为5分钟
- 过期后自动重新获取数据

### 手动更新缓存
1. 在订单页面点击"更新缓存"按钮
2. 或者直接调用API: `POST /app/api/cache-update`

### 缓存状态指示
- 页面顶部会显示"当前显示缓存数据"标识
- 只有使用缓存数据时才会显示

## 配置选项

在 `cache.server.js` 中可以修改：
- 缓存过期时间（默认5分钟）
- 缓存文件位置
- 缓存数据结构

## 注意事项

1. 缓存文件存储在 `cache/` 目录下
2. 服务器重启后缓存会丢失
3. 缓存只包含订单列表，搜索功能仍需要API调用
4. 确保服务器有写入权限创建缓存目录
